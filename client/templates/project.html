---
name: project
url: /project/:id
animationIn: fadeIn
controller: projectController
---

<div zf-panel position="left" id="sidebar" class="medium-grid-block collapse medium-2 large-2 vertical" ng-hide="$state.current.name === 'home'" ng-init="{projectID:project.id}">
  <div class="grid-content collapse shrink">
    <ul class="menu-bar primary">
      <li id="organization" ng-controller="projectController">
        <a zf-popup-toggle="switcher">
          <h2>{{ project.name | limitTo:18 }}<small ng-if="project.name.length > 18">&#8230;</small></h2>

          <i class="icon ion-chevron-down right"></i>
        </a>

        <zf-popup id="switcher" class="switcher-wrap" ng-show="!hideSwitcher">
          <small>Projects</small>
          <ul class="block-list" id="switcher-project" ng-controller="projectsController">
            <li ng-repeat="project in projects"><a href="../brigade-ui/#!/project/{{project.id}}" ng-click="hideSwitcher = true">{{project.name}}</a></li>
          </ul>
        </zf-popup>
      </li>
    </ul>
  </div>
  <div class="grid-content">
    <nav>
      <ul>
        <li>
          <ul ng-controller="buildsController" ng-model="filterMenu">
            <li ng-click="buildFilter = null" ng-class="{ 'active': $state.current.name == 'project' && buildFilter == null }" class="active" ng-init="buildFilter(null)" ng-model="content"><a>All Events</a></li>
            <li ng-click="buildFilter = 'brigade-cli'" ng-class="{ 'active': buildFilter == 'brigade-cli'}"><a>Brigade-cli</a></li>
            <li ng-click="buildFilter = 'github'" ng-class="{ 'active': buildFilter == 'github'}"><a>Github</a></li>
            <li ng-click="buildFilter = 'slack'" ng-class="{ 'active': buildFilter == 'slack'}"><a>Slack</a></li>
            <li ng-click="buildFilter = 'trello'" ng-class="{ 'active': buildFilter == 'trello' }"><a>Trello</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
  <div class="grid-content collapse shrink avatar-section">
    <nav>
      <ul>
        <li><a href="https://github.com/azure/brigade/tree/master/docs" target="_blank">
          Docs
        </a></li>
        <li><a href="https://github.com/azure/brigade/issues/" target="_blank">
          Support
        </a></li>
      </ul>
    </nav>
  </div>
</div>

<div class="medium-grid-block collapse medium-10 large-10 vertical">
  <div class="grid-block collapse vertical">

    <!-- topbar #header -->
    <div id="header" class="shrink collapse grid-content vertical">
      <div class="menu-group primary">
        <div class="menu-group-left">
          <ul class="menu-bar">
            <li 
              ng-controller="buildController" 
              ng-class="{ 'active': $state.current.name === 'project'}" 
              ng-hide="$state.current.name === 'home'">
              <a href="../brigade-ui/#!/project/{{project.id}}">Project Overview</a></li>
            <li ng-show="$state.current.name === 'build'"><a href="/#!/build/{{build.id}}">Build {{ $stateParams.build.id}}</a></li>
          </ul>
        </div>
        <div class="menu-group-right">
          <ul class="icon-right menu-bar">
            <li>
              <a href="" zf-popup-toggle="account-menu">
                <i class="icon ion-person rounded right"></i>
                <small>
                  <i class="icon ion-chevron-down right"></i>
                </small>
              </a>

              <zf-popup id="account-menu" class="account-dropdown">
                <ul class="block-list">
                  <li class="account-user">
                    <small>Logged in as:</small>
                    <strong>roflynnc@microsoft.com</strong>
                  </li>
                  <li><a href="/">User Settings</a></li>
                  <li><a href="/">Log Out</a></li>
                </ul>
              </zf-popup>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- /#header -->

    <div class="grid-block vertical">
      <div class="grid-content content-wrap">

        <div class="grid-content project-header-wrap">
          <div class="grid-block horizontal collapse">
            <div class="small-12 vertical">
              <div class="project-header">
                <h1>{{project.name}}</h1>
                <ul>
                  <li>{{project.repo.cloneURL}}</li>
                  <li>Sidecar: {{project.kubernetes.vcsSidecar}}</li>
                  <li>Namespace: {{project.kubernetes.namespace}}</li>
                </ul>

                <!-- <div class="build-status" ng-init="buildResult='success'" ng-class="{
                  'build-success': buildResult == 'success',
                  'build-failed': buildResult == 'failed',
                  'build-active': buildResult == 'active'
                }">
                  <div class="success" ng-show="buildResult == 'success'"><i class="icon ion-checkmark-circled"></i> Passing</div>
                  <div class="failed" ng-show="buildResult == 'failed'"><i class="icon ion-close-circled"></i> Failing</div>
                  <div class="active" ng-show="buildResult == 'active'"><img src="assets/images/rolling.svg" /> In Progress</div>
                </div> -->
              </div>

              <div class="project-status-bar">
                <div class="grid-content icon-blue small-12 collapse columns">
                  <img src="assets/images/ripple.svg" />
                  <span>Watching for events.</span>
                </div>
              </div>
            </div>

          </div>
        </div>

        <ul class="grid-content build-list" ng-controller="buildsController">
          <li ng-repeat="build in builds | filter:{buildFilter:filterMenu} | orderBy:'build.worker.start_time':true" class="medium-grid-block build-item" ng-class="{
            'visible': buildFilter == {{build.provider}},
            'hidden': buildFilter !== {{build.provider}},
          }">
            <a href="../brigade-ui/#!/build/{{build.id}}" class="grid-block">

              <span class="act-state collapse {{ build.worker.status }}" ng-class="{
                'success': build.worker.status == 'Succeeded',
                'failed': build.worker.status == 'Failed',
                'active': build.worker.status == 'Pending'
              }">
                <div class="success" title="Passed"><i class="icon ion-checkmark-circled"></i></div>
                <div class="failed" title="Failed"><i class="icon ion-close-circled"></i></div>
                <div class="active" title="In progress"><img src="assets/images/rolling.svg" /></div>
              </span>
              <span class="act-author">
                <span class="act-avatar">
                  <!-- <i class="icon ion-ios-bolt" ng-show="
                    build.provider !== 'github' | build.provider !== 'slack' | build.provider !== 'trello' | build.provider !== 'brigade-cli'
                  "></i> -->
                  <i class="icon ion-social-github" ng-show="build.provider === 'github' "></i>
                  <i class="icon avatar-slack" ng-show="build.provider === 'slack' "><img src="assets/images/slack.png" /></i>
                  <i class="icon avatar-trello" ng-show="build.provider === 'trello' "><img src="assets/images/trello.png" /></i>
                  <i class="icon ion-ios-bolt" ng-show="build.provider === 'brigade-cli' "></i>
                </span>
                {{build.provider | limitTo:18 }}<small ng-if="build.provider.length > 18">&#8230;</small>
              </span>
              <span class="act-hash">
                {{build.commit | limitTo : -6: number.length }}
              </span>
              <span class="act-message">
                <em>#</em>{{build.id | limitTo:34 }}<small ng-if="build.id.length > 34">&#8230;</small>
              </span>
              <span class="act-time-ago">
                {{build.worker.status}} <span am-time-ago="build.worker.end_time"></span>.
              </span>
              <span class="act-time-duration">
                Ran for <span>{{ build.worker.end_time | amDifference : build.worker.start_time : 'seconds' }} seconds.</span>
              </span>
              <!-- <div class="act-child-jobs">
                {{ build.jobs.length }}
              </div> -->
            </a>
          </li>
        </ul>

        <div class="text-center">
          <button class="secondary round small">Load More</button>
        </div>
      </div>

      <!-- app footer -->
      <footer class="collapse shrink">
        <ul class="inline-list">
          <li class="right microsoft-logo">
            <a href="https://open.microsoft.com/" target="_blank"><img src="assets/images/microsoft.png" /></a>
          </li>
          <li><span><a href="https://github.com/azure/brigade" target="_blank">BRIGADE</a> is licensed under the The MIT License.</span></li>
          <li><a href="https://github.com/azure/brigade/releases" target="_blank">Changelog</a></li>
          <li><a href="https://github.com/azure/brigade/tree/master/docs" target="_blank">Documentation</a></li>
          <li><a href="https://github.com/azure/brigade/" target="_blank">Github</a></li>
        </ul>
      </footer>

    </div>
  </div>

</div>
